<!DOCTYPE html>
<html>
<head>
  <title>Python Web App</title>
  <style>
    /* Add your custom styles here */
  </style>
</head>
<body>
  <h1>Python Web App</h1>
  
  <textarea id="codeInput" rows="10" cols="50"></textarea>
  <button id="runButton">Run</button>
  
  <h2>Output:</h2>
  <pre id="outputArea"></pre>
  
  <h2>Errors:</h2>
  <pre id="errorArea"></pre>
  
  <script src="https://pyodide.cdn.iodide.io/pyodide.js"></script>
  <script>
    async function runPythonCode() {
      const codeInput = document.getElementById('codeInput');
      const outputArea = document.getElementById('outputArea');
      const errorArea = document.getElementById('errorArea');
      
      // Clear the output and error areas
      outputArea.innerText = '';
      errorArea.innerText = '';
      
      // Retrieve the Python code from the input field
      const pythonCode = codeInput.value;
      
      // Load and initialize the Pyodide library
      await loadPyodide({ indexURL: 'https://pyodide-cdn2.iodide.io/0.17.0/full/' });
      
      try {
        // Redirect stdout to capture output
        const stdout = pyodide.runPython('import io, sys\nsys.stdout = io.StringIO()');
        
        // Execute the Python code
        pyodide.runPython(pythonCode);
        
        // Retrieve the captured output and display it
        const capturedOutput = stdout.getvalue();
        outputArea.innerText = capturedOutput;
      } catch (error) {
        // Display the error in the dedicated error area
        errorArea.innerText = error.toString();
      }
    }
    
    // Attach the runPythonCode function to the run button's click event
    const runButton = document.getElementById('runButton');
    runButton.addEventListener('click', runPythonCode);
  </script>
</body>
</html>
